(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const y of s.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();class L{#e;constructor(e,n,o){this.resultElement=e,this.playAgainButton=n,this.resetButton=o}resetLocalStorage(){window.localStorage.removeItem("topScore"),this.#e=0,alert("Local storage reset!")}showTopScore(){const e=JSON.parse(window.localStorage.getItem("topScore"))||[];let n="The list of top scores: <br>";e.forEach((o,t)=>{n+=`${t+1}. ${o.name}: ${o.score} Sec <br>`}),document.querySelector(".result").innerHTML=n,document.querySelector(".play-again").style.display="block",document.querySelector(".reset-btn").style.display="block"}victory(e){document.querySelector(".game-container").style.display="none",document.querySelector(".game-container").style.display="none",document.querySelector(".info_box").style.display="none",document.querySelector(".result").style.display="block";const n=JSON.parse(window.localStorage.getItem("topScore"))??[];n.push({name:document.querySelector(".name-input").value,score:e}),n.sort((o,t)=>o.score-t.score),n.splice(5),window.localStorage.setItem("topScore",JSON.stringify(n)),alert(`Victory! Remaining Time: ${e} sec`),this.showTopScore(e)}}const T=document.querySelector(".start-btn"),u=document.querySelector(".info_box"),m=document.querySelector(".name-input"),S=document.querySelector(".play-again"),d=document.querySelector(".game-container"),p=document.querySelector(".time-container"),k=document.querySelector(".record"),g=document.querySelector(".quiz-div"),x=document.querySelector(".submit-btn"),I=document.querySelector(".result"),O=document.querySelector(".user-name"),v=document.querySelector(".reset-btn"),$="https://courselab.lnu.se/quiz/question/1",q=new L;let c={id:1,question:"",message:""},l=10,f=l,i,h="",a=0;k.style.display="none";function B(){m.value.length>0?(u.style.display="none",d.style.display="block",O.innerHTML=`User name: ${m.value}`,b($)):alert("Write Name!")}T.addEventListener("click",B);x.addEventListener("click",()=>{let r;p.innerHTML="",clearTimeout(i);const e=document.getElementById("answerBox");if(e)r=e.value,console.log(r);else{const n=g.querySelector(".answers"),o="input:checked";r=(n.querySelector(o)||{}).value}E(h,{answer:r})});async function E(r,e={}){w(),a=a+(l-f),console.log(a+(l-f));const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=await fetch(r,n),t=await o.json();o.ok&&t.nextURL===void 0&&(H(),q.victory(a)),!o.ok&&t.nextURL===void 0&&j(),r=t.nextURL,b(r)}function H(){clearInterval(i)}function b(r){fetch(r).then(function(e){if(e.headers.get("content-Type").includes("application/json"))return e.json();throw new Error("Invalid response format!")}).then(function(e){M(e)})}function M(r){c=r;const e=[],n=[];if(h=c.nextURL,c.alternatives)for(document.altIndex in c.alternatives)n.push(`<label>
                                    <input type="radio" name="question${c.id}" value="${document.altIndex}">
                                    ${c.alternatives[document.altIndex]}
                                    </label>`);else n.push(`<input type="text" id="answerBox" name="question${c.id}" />`);e.push(`<div >
                            <div class ="question"> ${c.question} </div>
                            <div class ="answers"> ${n.join("")} </div>
                            </div>`),g.innerHTML=e.join(""),w()}function w(){clearInterval(i),f=l,i=setInterval(()=>{p.innerHTML="Time: "+l+" seconds",l--,l<0&&(clearInterval(i),d.style.display="none",p.innerHTML="Time is up!",N())},1e3),l=10}function N(){alert("Time over!"),u.style.display="none",d.style.display="none",document.querySelector(".result").innerHTML="Game Over",document.querySelector(".play-again").style.display="block"}function j(){alert("Wrong answer!"),u.style.display="none",d.style.display="none",document.querySelector(".result").innerHTML="Game Over",document.querySelector(".play-again").style.display="block"}S.addEventListener("click",()=>{m.value="",S.style.display="none",I.style.display="none",u.style.display="block",v.style.display="none"});v.addEventListener("click",()=>{q.resetLocalStorage()});
